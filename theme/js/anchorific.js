if(typeof Object.create!=="function"){Object.create=function(b){function a(){}a.prototype=b;return new a()}}(function(c,b,a,d){var e={init:function(g,h){var f=this;f.elem=h;f.$elem=c(h);f.opt=c.extend({},this.opt,g);f.headers=f.$elem.find("h1[id], h2[id], h3[id], h4[id], h5[id], h6[id]");f.previous=0;if(f.headers.length!==0){f.first=parseInt(f.headers.prop("nodeName").substring(1),null);f.build()}},opt:{navigation:".anchorific",speed:200,anchorClass:"anchor",anchorText:"#",top:".top",spy:true,position:"append",spyOffset:!0},build:function(){var g=this,j,f=function(){};if(g.opt.navigation){c(g.opt.navigation).append('<ul class="tree"><li><strong>Cодержание:</strong></li></ul>');g.previous=c(g.opt.navigation).find("ul").last();f=function(i){return g.navigations(i)}}for(var h=0;h<g.headers.length;h++){j=g.headers.eq(h);f(j)}if(g.opt.spy){g.spy()}if(g.opt.top){g.back()}},navigations:function(j){var f=this,h,i,k,g=f.name(j);if(j.attr("id")!==d){g=j.attr("id")}h=c("<a />").attr("href","#"+g).text(j.text());i=c("<li />").append(h);k=parseInt(j.prop("nodeName").substring(1),null);i.attr("data-tag",k);f.subheadings(k,i);f.first=k},subheadings:function(j,g){var h=this,i=c(h.opt.navigation).find("ul"),f=c(h.opt.navigation).find("li");if(j===h.first){h.previous.append(g)}else{if(j>h.first){f.last().append("<ul />");c(h.opt.navigation).find("ul").last().append(g);h.previous=g.parent()}else{c("li[data-tag="+j+"]").last().parent().append(g);h.previous=g.parent()}}},name:function(g){var f=g.text().replace(/[^\w\s]/gi,"").replace(/\s+/g,"-").toLowerCase();return f},anchor:function(j){var g=this,i=g.name(j),h,k=g.opt.anchorText,f=g.opt.anchorClass,l;if(j.attr("id")===d){j.attr("id",i)}l=j.attr("id");h=c("<a />").attr("href","#"+l).html(k).addClass(f);if(g.opt.position==="append"){j.append(h)}else{j.prepend(h)}},back:function(){var g=this,f=c("body, html"),h=c(g.opt.top);h.on("click",function(i){i.preventDefault();f.animate({scrollTop:0},g.opt.speed)})},top:function(h){var g=this,i=g.opt.top,f;if(i!==false){f=(c(h).scrollTop()>200)?c(i).fadeIn():c(i).fadeOut()}},spy:function(){var f=this,h,k,i,j,g;c(b).scroll(function(l){f.top(this);k=f.headers.map(function(m){if((c(this).offset().top-c(b).scrollTop())<f.opt.spyOffset){return this}});k=c(k).eq(k.length-1);if(k&&k.length){i=c('li:has(a[href="#'+k.attr("id")+'"])');if(g!==d){g.removeClass("active")}i.addClass("active");g=i}})}};c.fn.anchorific=function(f){return this.each(function(){if(!c.data(this,"anchorific")){var g=Object.create(e);g.init(f,this);c.data(this,"anchorific",g)}})}})(jQuery,window,document);$(document).ready(function(){$("article.content").anchorific({speed:200,anchorClass:null,anchorText:null,spy:true,position:null,anchor:null});var c=$(window),a=$("div.anchorific"),b=a.offset().top;c.scroll(function(){a.toggleClass("sticky",c.scrollTop()>b-33)})});